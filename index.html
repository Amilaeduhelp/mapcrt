<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∂Ö‡∂ö‡∑ä‡∑Ç‡∑è‡∂Ç‡∑Å-‡∂Ø‡∑ö‡∑Å‡∑è‡∂Ç‡∑Å ‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏‡∑ä ‡∂¥‡∑í‡∂±‡∑ä‡∂≠‡∑è‡∂ª‡∑î‡∑Ä</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans Sinhala', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            max-width: 1200px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .map-container {
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        
        .canvas-wrapper {
            position: relative;
            display: inline-block;
        }
        
        .external-label {
            position: absolute;
            font-size: 12px;
            font-weight: 600;
            color: #667eea;
            background: white;
            padding: 3px 8px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .label-top {
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .label-right {
            right: -80px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .label-bottom {
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .label-left {
            left: -80px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        #mapCanvas {
            border: 2px solid #667eea;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            cursor: crosshair;
            background: white;
        }
        
        .map-selector {
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .map-selector label {
            font-weight: 600;
            color: #333;
            font-size: 1.1em;
        }
        
        .map-selector select {
            padding: 12px 20px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1em;
            font-family: 'Noto Sans Sinhala', Arial, sans-serif;
            background: white;
            cursor: pointer;
            min-width: 250px;
            transition: all 0.3s;
        }
        
        .map-selector select:hover {
            border-color: #764ba2;
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.3);
        }
        
        .map-selector select:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 3px 15px rgba(102, 126, 234, 0.4);
        }
        
        .controls {
            margin-top: 20px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
            font-family: 'Noto Sans Sinhala', Arial, sans-serif;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }
        
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c82333;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .points-list {
            margin-top: 20px;
            max-width: 800px;
            width: 100%;
        }
        
        .points-list h3 {
            margin-bottom: 10px;
            color: #333;
            text-align: center;
        }
        
        .point-item {
            background: #f8f9fa;
            padding: 10px 15px;
            margin-bottom: 8px;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .point-info {
            flex: 1;
        }
        
        .point-name {
            font-weight: 600;
            color: #667eea;
            margin-bottom: 3px;
        }
        
        .point-coords {
            font-size: 0.85em;
            color: #666;
        }
        
        .btn-remove {
            background: #dc3545;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            border: none;
            cursor: pointer;
        }
        
        .info-box {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‡∂Ö‡∂ö‡∑ä‡∑Ç‡∑è‡∂Ç‡∑Å-‡∂Ø‡∑ö‡∑Å‡∑è‡∂Ç‡∑Å ‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏‡∑ä ‡∂¥‡∑í‡∂±‡∑ä‡∂≠‡∑è‡∂ª‡∑î‡∑Ä</h1>
            <p>‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏‡∑ö click ‡∂ö‡∂ª ‡∑É‡∑ä‡∂Æ‡∑è‡∂± ‡∑É‡∂Ω‡∂ö‡∑î‡∂´‡∑î ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</p>
        </div>
        
        <div class="map-container">
            <div class="info-box">
                <strong>‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂± ‡∂Ü‡∂ö‡∑è‡∂ª‡∂∫:</strong> ‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏‡∂ö‡∑ä ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂± ‚Üí ‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏‡∑ö ‡∂ï‡∂±‡∑ë‡∂∏ ‡∂≠‡∑ê‡∂±‡∂ö click ‡∂ö‡∂ª ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫‡∂ß ‡∂±‡∂∏‡∂ö‡∑ä ‡∂Ω‡∂∂‡∑è ‡∂Ø‡∑ô‡∂±‡∑ä‡∂±
            </div>
            
            <div class="map-selector">
                <label for="mapSelect">üó∫Ô∏è ‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏ ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±:</label>
                <select id="mapSelect" onchange="loadSelectedMap()">
                    <option value="">-- ‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏‡∂ö‡∑ä ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂± --</option>
                    <option value="sl_ol">‡∑É‡∑è. ‡∂¥‡∑ô‡∑Ö ‡∂Ω‡∂Ç‡∂ö‡∑è</option>
                    <option value="world_ol">‡∑É‡∑è.‡∂¥‡∑ô‡∑Ö ‡∂Ω‡∑ù‡∂ö</option>
                    <option value="sl_al">‡∂ã‡∑É‡∑É‡∑ä ‡∂¥‡∑ô‡∑Ö ‡∂Ω‡∂Ç‡∂ö‡∑è</option>
                    <option value="europe_al">‡∂ã‡∑É‡∑É‡∑ä ‡∂¥‡∑ô‡∑Ö ‡∂∫‡∑î‡∂ª‡∑ù‡∂¥‡∑è</option>
                    <option value="india_al">‡∂ã‡∑É‡∑É‡∑ä ‡∂¥‡∑ô‡∑Ö ‡∂â‡∂±‡∑ä‡∂Ø‡∑í‡∂∫‡∑è</option>
                </select>
            </div>
            
            <div class="canvas-wrapper">
                <div class="external-label label-top" id="labelTop">‚ñ≤ 9.83619</div>
                <div class="external-label label-right" id="labelRight">‚ñ∂ 81.86700</div>
                <div class="external-label label-bottom" id="labelBottom">‚ñº 5.91853</div>
                <div class="external-label label-left" id="labelLeft">‚óÄ 79.69264</div>
                <canvas id="mapCanvas" width="700" height="900"></canvas>
            </div>
            
            <div class="controls">
                <button class="btn-success" onclick="downloadMap()">üì• ‡∂¥‡∑í‡∂±‡∑ä‡∂≠‡∑ñ‡∂ª‡∂∫ Download ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
                <button class="btn-secondary" onclick="clearLast()">‡∂Ö‡∑Ä‡∑É‡∑è‡∂± ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫ ‡∂â‡∑Ä‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
                <button class="btn-danger" onclick="clearAll()">‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω ‡∂â‡∑Ä‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
            </div>
            
            <div class="points-list" id="pointsListContainer" style="display: none;">
                <h3>‡∂ë‡∂ö‡∑ä ‡∂ö‡∑Ö ‡∑É‡∑ä‡∂Æ‡∑è‡∂±</h3>
                <div id="pointsList"></div>
            </div>
        </div>
    </div>
    
    <script>
        const canvas = document.getElementById('mapCanvas');
        const ctx = canvas.getContext('2d');
        
        // ‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏‡∑ä configurations
        const mapConfigs = {
            sl_ol: {
                name: '‡∑É‡∑è. ‡∂¥‡∑ô‡∑Ö ‡∂Ω‡∂Ç‡∂ö‡∑è',
                url: 'https://raw.githubusercontent.com/Amilaeduhelp/-2025/main/slditalmap-02.jpg',
                bounds: {
                    north: 9.83619,
                    south: 5.91853,
                    east: 81.86700,
                    west: 79.69264
                }
            },
            world_ol: {
                name: '‡∑É‡∑è.‡∂¥‡∑ô‡∑Ö ‡∂Ω‡∑ù‡∂ö',
                url: '', // ‡∂¥‡∑É‡∑î‡∑Ä ‡∂ë‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
                bounds: {
                    north: 90,
                    south: -90,
                    east: 180,
                    west: -180
                }
            },
            sl_al: {
                name: '‡∂ã‡∑É‡∑É‡∑ä ‡∂¥‡∑ô‡∑Ö ‡∂Ω‡∂Ç‡∂ö‡∑è',
                url: '', // ‡∂¥‡∑É‡∑î‡∑Ä ‡∂ë‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
                bounds: {
                    north: 9.83619,
                    south: 5.91853,
                    east: 81.86700,
                    west: 79.69264
                }
            },
            europe_al: {
                name: '‡∂ã‡∑É‡∑É‡∑ä ‡∂¥‡∑ô‡∑Ö ‡∂∫‡∑î‡∂ª‡∑ù‡∂¥‡∑è',
                url: '', // ‡∂¥‡∑É‡∑î‡∑Ä ‡∂ë‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
                bounds: {
                    north: 71,
                    south: 36,
                    east: 40,
                    west: -10
                }
            },
            india_al: {
                name: '‡∂ã‡∑É‡∑É‡∑ä ‡∂¥‡∑ô‡∑Ö ‡∂â‡∂±‡∑ä‡∂Ø‡∑í‡∂∫‡∑è',
                url: '', // ‡∂¥‡∑É‡∑î‡∑Ä ‡∂ë‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
                bounds: {
                    north: 35,
                    south: 8,
                    east: 97,
                    west: 68
                }
            }
        };
        
        let bounds = mapConfigs.sl_ol.bounds;
        let points = [];
        let mapImage = new Image();
        let mapLoaded = false;
        let currentMapKey = '';
        
        mapImage.onload = function() {
            mapLoaded = true;
            drawMap();
        };
        
        mapImage.onerror = function() {
            console.log('‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏ load ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∂Ö‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∂∫‡∑í');
            alert('‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏ load ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∂Ö‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∂∫‡∑í. ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.');
            mapLoaded = false;
            drawMap();
        };
        
        function loadSelectedMap() {
            const select = document.getElementById('mapSelect');
            const mapKey = select.value;
            
            if (!mapKey) {
                return;
            }
            
            const config = mapConfigs[mapKey];
            
            if (!config.url) {
                alert('‡∂∏‡∑ô‡∂∏ ‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏ ‡∂≠‡∑Ä‡∂∏‡∂≠‡∑ä ‡∂ë‡∂ö‡∑ä ‡∂ö‡∂ª ‡∂±‡∑ú‡∂∏‡∑ê‡∂≠. ‡∂â‡∂ö‡∑ä‡∂∏‡∂±‡∑í‡∂±‡∑ä ‡∂Ω‡∂∂‡∑è ‡∂ú‡∂≠ ‡∑Ñ‡∑ê‡∂ö.');
                select.value = currentMapKey;
                return;
            }
            
            currentMapKey = mapKey;
            bounds = config.bounds;
            points = []; // Clear existing points when changing map
            mapLoaded = false;
            
            // Load new map
            mapImage.crossOrigin = "anonymous";
            mapImage.src = config.url;
            
            updatePointsList();
        }
        
        // Canvas click event
        canvas.addEventListener('click', function(e) {
            if (!mapLoaded) {
                alert('‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂∏‡∑î‡∂Ω‡∑í‡∂±‡∑ä‡∂∏ ‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏‡∂ö‡∑ä ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±!');
                return;
            }
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // Convert pixel coordinates to lat/lng
            const lng = bounds.west + (x / canvas.width) * (bounds.east - bounds.west);
            const lat = bounds.north - (y / canvas.height) * (bounds.north - bounds.south);
            
            // ‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫‡∑ö ‡∂±‡∂∏ ‡∂Ö‡∑É‡∂±‡∑ä‡∂±
            const name = prompt('‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫‡∑ö ‡∂±‡∂∏ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±:', '');
            
            if (name !== null && name.trim() !== '') {
                const point = { 
                    lat: lat, 
                    lng: lng, 
                    name: name.trim() 
                };
                points.push(point);
                drawMap();
                updatePointsList();
            }
        });
        
        function drawMap() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ‡∑É‡∑î‡∂Ø‡∑î ‡∂¥‡∑É‡∑î‡∂∂‡∑í‡∂∏
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏‡∑ä ‡∂¥‡∑í‡∂±‡∑ä‡∂≠‡∑ñ‡∂ª‡∂∫ ‡∂Ö‡∂≥‡∑í‡∂±‡∑ä‡∂±
            if (mapLoaded && mapImage.complete) {
                ctx.drawImage(mapImage, 0, 0, canvas.width, canvas.height);
            }
            
            // ‡∑É‡∑ä‡∂Æ‡∑è‡∂± ‡∂Ö‡∂≥‡∑í‡∂±‡∑ä‡∂±
            points.forEach(point => {
                const x = lngToX(point.lng);
                const y = latToY(point.lat);
                
                // ‡∑É‡∑î‡∂Ø‡∑î ‡∂¥‡∑í‡∂ß‡∂≠ ‡∂ª‡∑Ä‡∑î‡∂∏
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(x, y, 3, 0, Math.PI * 2);
                ctx.stroke();
                
                // ‡∂ö‡∑Ö‡∑î ‡∂≠‡∑í‡∂≠
                ctx.fillStyle = '#000000';
                ctx.beginPath();
                ctx.arc(x, y, 3, 0, Math.PI * 2);
                ctx.fill();
                
                // ‡∂±‡∂∏
                if (point.name) {
                    ctx.fillStyle = '#000';
                    ctx.strokeStyle = 'white';
                    ctx.lineWidth = 3;
                    ctx.font = 'bold 12px Noto Sans Sinhala, Arial';
                    ctx.strokeText(point.name, x + 6, y - 6);
                    ctx.fillText(point.name, x + 6, y - 6);
                }
            });
            
            updateExternalLabels();
        }
        
        function updateExternalLabels() {
            document.getElementById('labelTop').textContent = '‚ñ≤ ' + bounds.north;
            document.getElementById('labelRight').textContent = '‚ñ∂ ' + bounds.east;
            document.getElementById('labelBottom').textContent = '‚ñº ' + bounds.south;
            document.getElementById('labelLeft').textContent = '‚óÄ ' + bounds.west;
        }
        
        function latToY(lat) {
            return canvas.height - ((lat - bounds.south) / (bounds.north - bounds.south)) * canvas.height;
        }
        
        function lngToX(lng) {
            return ((lng - bounds.west) / (bounds.east - bounds.west)) * canvas.width;
        }
        
        function updatePointsList() {
            const listContainer = document.getElementById('pointsListContainer');
            const list = document.getElementById('pointsList');
            
            if (points.length > 0) {
                listContainer.style.display = 'block';
                list.innerHTML = '';
                
                points.forEach((point, index) => {
                    const div = document.createElement('div');
                    div.className = 'point-item';
                    div.innerHTML = `
                        <div class="point-info">
                            <div class="point-name">${point.name}</div>
                            <div class="point-coords">${point.lat.toFixed(5)}, ${point.lng.toFixed(5)}</div>
                        </div>
                        <button class="btn-remove" onclick="removePoint(${index})">‡∂â‡∑Ä‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
                    `;
                    list.appendChild(div);
                });
            } else {
                listContainer.style.display = 'none';
            }
        }
        
        function removePoint(index) {
            points.splice(index, 1);
            drawMap();
            updatePointsList();
        }
        
        function clearLast() {
            if (points.length > 0) {
                points.pop();
                drawMap();
                updatePointsList();
            }
        }
        
        function clearAll() {
            if (points.length > 0 && confirm('‡∂î‡∂∂‡∂ß ‡∑É‡∑í‡∂∫‡∂Ω‡∑î‡∂∏ ‡∑É‡∑ä‡∂Æ‡∑è‡∂± ‡∂â‡∑Ä‡∂≠‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫‡∂Ø?')) {
                points = [];
                drawMap();
                updatePointsList();
            }
        }
        
        function downloadMap() {
            if (!mapLoaded) {
                alert('‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂∏‡∑î‡∂Ω‡∑í‡∂±‡∑ä‡∂∏ ‡∑É‡∑í‡∂≠‡∑í‡∂∫‡∂∏‡∂ö‡∑ä ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±!');
                return;
            }
            const link = document.createElement('a');
            link.download = 'map_' + new Date().getTime() + '.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
        
        // Initial draw
        drawMap();
    </script>
</body>
</html>
